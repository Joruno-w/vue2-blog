{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./src/components/MessageArea/DataForm.vue?8069","webpack:///./src/components/MessageArea/index.vue?dff0","webpack:///./src/components/MessageArea/index.vue?0314","webpack:///./src/components/MessageArea/DataForm.vue?9b68","webpack:///src/components/MessageArea/DataForm.vue","webpack:///./src/components/MessageArea/DataForm.vue?d7cc","webpack:///./src/components/MessageArea/DataForm.vue","webpack:///./src/components/MessageArea/DataList.vue?452b","webpack:///src/components/MessageArea/DataList.vue","webpack:///./src/components/MessageArea/DataList.vue?a31d","webpack:///./src/components/MessageArea/DataList.vue","webpack:///src/components/MessageArea/index.vue","webpack:///./src/components/MessageArea/index.vue?b96d","webpack:///./src/components/MessageArea/index.vue","webpack:///./src/views/Message/index.vue?f88c","webpack:///./src/views/Message/index.vue?93a1","webpack:///./src/api/message.js","webpack:///src/views/Message/index.vue","webpack:///./src/views/Message/index.vue?a5ce","webpack:///./src/views/Message/index.vue","webpack:///./src/components/MessageArea/DataList.vue?8963","webpack:///./src/mixins/fetchData.js","webpack:///./src/mixins/mainScroll.js"],"names":["_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","Object","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","render","_vm","this","_h","$createElement","_c","_self","staticClass","_g","$listeners","_v","_s","title","subTitle","attrs","list","directives","name","rawName","value","expression","staticRenderFns","ref","on","$event","preventDefault","handleSubmit","formData","domProps","target","composing","$set","nickname","length","error","content","isSubmiting","component","_l","item","key","id","avatar","formatDate","createDate","datas","loading","rows","getMessages","page","limit","request","get","params","postMessage","msgInfo","post","defaultValue","data","created","fetchDatas","refValue","mounted","$bus","$on","handleSetMainScroll","$refs","addEventListener","handleMainScroll","beforeDestroy","$emit","$off","removeEventListener","methods","scrollTop"],"mappings":"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","file":"js/chunk-7c696807.63033b57.js","sourcesContent":["import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataForm.vue?vue&type=style&index=0&id=29fed02e&scoped=true&lang=less&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=5f54f392&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message-area-container\"},[_c('DataForm',_vm._g({},_vm.$listeners)),_c('h3',[_vm._v(\" \"+_vm._s(_vm.title)+\" \"),_c('span',[_vm._v(_vm._s(_vm.subTitle))])]),_c('DataList',{attrs:{\"list\":_vm.list}}),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isListLoading),expression:\"isListLoading\"}],staticClass:\"loading\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{ref:\"form\",staticClass:\"data-form-container\",attrs:{\"id\":\"data-form-container\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.handleSubmit($event)}}},[_c('div',{staticClass:\"form-item\"},[_c('div',{staticClass:\"input-area\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formData.nickname),expression:\"formData.nickname\"}],attrs:{\"type\":\"text\",\"maxlength\":\"10\",\"placeholder\":\"用户昵称\"},domProps:{\"value\":(_vm.formData.nickname)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.formData, \"nickname\", $event.target.value)}}}),_c('span',{staticClass:\"tip\"},[_vm._v(_vm._s(_vm.formData.nickname.length)+\"/10\")])]),_c('div',{staticClass:\"error\"},[_vm._v(_vm._s(_vm.error.nickname))])]),_c('div',{staticClass:\"form-item\"},[_c('div',{staticClass:\"text-area\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formData.content),expression:\"formData.content\"}],attrs:{\"maxlength\":\"300\",\"placeholder\":\"输入内容\"},domProps:{\"value\":(_vm.formData.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.formData, \"content\", $event.target.value)}}}),_c('span',{staticClass:\"tip\"},[_vm._v(_vm._s(_vm.formData.content.length)+\"/300\")])]),_c('div',{staticClass:\"error\"},[_vm._v(_vm._s(_vm.error.content))])]),_c('div',{staticClass:\"form-item\"},[_c('div',{staticClass:\"button-area\"},[_c('button',{attrs:{\"disabled\":_vm.isSubmiting}},[_vm._v(\" \"+_vm._s(_vm.isSubmiting ? \"提交中...\" : \"提交\")+\" \")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<form\n\t\tid=\"data-form-container\"\n\t\tref=\"form\"\n\t\t@submit.prevent=\"handleSubmit\"\n\t\tclass=\"data-form-container\"\n\t>\n\t\t<div class=\"form-item\">\n\t\t\t<div class=\"input-area\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tmaxlength=\"10\"\n\t\t\t\t\tv-model=\"formData.nickname\"\n\t\t\t\t\tplaceholder=\"用户昵称\"\n\t\t\t\t/>\n\t\t\t\t<span class=\"tip\">{{ formData.nickname.length }}/10</span>\n\t\t\t</div>\n\t\t\t<div class=\"error\">{{ error.nickname }}</div>\n\t\t</div>\n\t\t<div class=\"form-item\">\n\t\t\t<div class=\"text-area\">\n        <textarea\n\t        maxlength=\"300\"\n\t        placeholder=\"输入内容\"\n\t        v-model=\"formData.content\"\n        ></textarea>\n\t\t\t\t<span class=\"tip\">{{ formData.content.length }}/300</span>\n\t\t\t</div>\n\t\t\t<div class=\"error\">{{ error.content }}</div>\n\t\t</div>\n\t\t<div class=\"form-item\">\n\t\t\t<div class=\"button-area\">\n\t\t\t\t<button :disabled=\"isSubmiting\">\n\t\t\t\t\t{{ isSubmiting ? \"提交中...\" : \"提交\" }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n</template>\n\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tformData: {\n\t\t\t\tnickname: \"\",\n\t\t\t\tcontent: \"\",\n\t\t\t},\n\t\t\terror: {\n\t\t\t\tnickname: \"\",\n\t\t\t\tcontent: \"\",\n\t\t\t},\n\t\t\tisSubmiting: false,\n\t\t};\n\t},\n\tmethods: {\n\t\thandleSubmit() {\n\t\t\tthis.error.nickname = this.formData.nickname ? \"\" : \"请填写昵称\";\n\t\t\tthis.error.content = this.formData.content ? \"\" : \"请填写内容\";\n\t\t\tif (this.error.nickname || this.error.content) {\n\t\t\t\t// 有错误\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.isSubmiting = true; // 正在提交，防止重复点击\n\t\t\tthis.$emit(\"submit\", this.formData, (successMsg) => {\n\t\t\t\tthis.$showMessage({\n\t\t\t\t\tcontent: successMsg,\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\tduration: 1000,\n\t\t\t\t\tcontainer: this.$refs.form,\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\tthis.isSubmiting = false;\n\t\t\t\t\t\tthis.formData.nickname = \"\";\n\t\t\t\t\t\tthis.formData.content = \"\";\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}); // 让父组件来处理事件\n\t\t},\n\t},\n};\n</script>\n\n<style scoped lang=\"less\">\n@import \"~@/styles/var.less\";\n\n.data-form-container {\n\tmargin-bottom: 20px;\n\toverflow: hidden;\n}\n\n.form-item {\n\tmargin-bottom: 8px;\n}\n\n.input-area {\n\twidth: 50%;\n\tposition: relative;\n}\n\n.text-area {\n\tposition: relative;\n}\n\n.tip {\n\tposition: absolute;\n\tright: 5px;\n\tbottom: 5px;\n\tcolor: #b4b8bc;\n\tfont-size: 12px;\n}\n\ninput,\ntextarea {\n\tdisplay: block;\n\twidth: 100%;\n\tbox-sizing: border-box;\n\tborder: 1px dashed @gray;\n\toutline: none;\n\tcolor: @words;\n\tfont-size: 14px;\n\tborder-radius: 4px;\n\n\t&:focus {\n\t\tborder-color: @primary;\n\t}\n}\n\ninput {\n\tpadding: 0 15px;\n\theight: 40px;\n}\n\ntextarea {\n\tresize: none;\n\tpadding: 8px 15px;\n\theight: 120px;\n}\n\n.error {\n\tmargin-top: 6px;\n\tcolor: @danger;\n\tfont-size: 14px;\n\theight: 20px;\n\tline-height: 20px;\n}\n\nbutton {\n\tposition: relative;\n\tcursor: pointer;\n\tborder: none;\n\toutline: none;\n\twidth: 100px;\n\theight: 34px;\n\tcolor: #fff;\n\tborder-radius: 4px;\n\tbackground: @primary;\n\n\t&:hover {\n\t\tbackground: darken(@primary, 10%);\n\t}\n\n\t&:disabled {\n\t\tbackground: lighten(@primary, 20%);\n\t\tcursor: not-allowed;\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DataForm.vue?vue&type=template&id=29fed02e&scoped=true&\"\nimport script from \"./DataForm.vue?vue&type=script&lang=js&\"\nexport * from \"./DataForm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DataForm.vue?vue&type=style&index=0&id=29fed02e&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"29fed02e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"data-list-container\"},_vm._l((_vm.list),function(item){return _c('li',{key:item.id},[_c('Avatar',{attrs:{\"src\":item.avatar,\"size\":44}}),_c('div',{staticClass:\"data\"},[_c('div',{staticClass:\"nickname\"},[_vm._v(_vm._s(item.nickname))]),_c('div',{staticClass:\"content\"},[_vm._v(_vm._s(item.content))]),_c('div',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.formatDate(item.createDate, true)))])])],1)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<ul class=\"data-list-container\">\n\t\t<li v-for=\"item in list\" :key=\"item.id\">\n\t\t\t<Avatar :src=\"item.avatar\" :size=\"44\" />\n\t\t\t<div class=\"data\">\n\t\t\t\t<div class=\"nickname\">{{ item.nickname }}</div>\n\t\t\t\t<div class=\"content\">{{ item.content }}</div>\n\t\t\t\t<div class=\"time\">{{ formatDate(item.createDate, true) }}</div>\n\t\t\t</div>\n\t\t</li>\n\t</ul>\n</template>\n\n<script>\nimport Avatar from \"@/components/Avatar\";\nimport { formatDate } from \"@/utils\";\nexport default {\n\tcomponents: {\n\t\tAvatar,\n\t},\n\tprops: {\n\t\tlist: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t},\n\tmethods: {\n\t\tformatDate,\n\t},\n};\n</script>\n\n<style scoped lang=\"less\">\n@import \"~@/styles/var.less\";\n.data-list-container {\n\tlist-style: none;\n\tmargin: 0;\n\tpadding: 0;\n}\nli {\n\tdisplay: flex;\n\tborder-bottom: 1px solid lighten(@gray, 20%);\n\tpadding: 15px 0;\n}\n.avatar-container {\n\tmargin-right: 15px;\n}\n.nickname {\n\tcolor: darken(@success, 10%);\n\tmargin-bottom: 10px;\n}\n.content {\n\tfont-size: 14px;\n}\n.data {\n\tflex: 1 1 auto;\n\tposition: relative;\n}\n.time {\n\tposition: absolute;\n\tright: 0;\n\ttop: 5px;\n\tfont-size: 12px;\n\tcolor: @gray;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DataList.vue?vue&type=template&id=df40e7a2&scoped=true&\"\nimport script from \"./DataList.vue?vue&type=script&lang=js&\"\nexport * from \"./DataList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DataList.vue?vue&type=style&index=0&id=df40e7a2&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"df40e7a2\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div class=\"message-area-container\">\n\t\t<DataForm v-on=\"$listeners\" />\n\t\t<h3>\n\t\t\t{{ title }}\n\t\t\t<span>{{ subTitle }}</span>\n\t\t</h3>\n\t\t<DataList :list=\"list\" />\n\t\t<div class=\"loading\" v-loading=\"isListLoading\"></div>\n\t</div>\n</template>\n\n<script>\nimport DataForm from \"./DataForm\";\nimport DataList from \"./DataList\";\nexport default {\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: \"\",\n\t\t},\n\t\tsubTitle: {\n\t\t\ttype: String,\n\t\t\tdefault: \"\",\n\t\t},\n\t\tlist: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tisListLoading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomponents: {\n\t\tDataForm,\n\t\tDataList,\n\t},\n};\n</script>\n\n<style scoped lang=\"less\">\n.loading {\n\tposition: relative;\n\theight: 100px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5f54f392&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=5f54f392&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5f54f392\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=d3c33b04&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"messageContainer\",staticClass:\"message-container\"},[_c('MessageArea',{attrs:{\"title\":\"留言板\",\"subTitle\":(\"(\" + (_vm.datas.total) + \")\"),\"isListLoading\":_vm.loading,\"list\":_vm.datas.rows},on:{\"submit\":_vm.handleSubmit}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from \"./request\";\n\nexport async function getMessages(page = 1, limit = 10) {\n\treturn await request.get(\"/api/message\", {\n\t\tparams: {\n\t\t\tpage,\n\t\t\tlimit,\n\t\t},\n\t});\n}\n\nexport async function postMessage(msgInfo) {\n\treturn await request.post(\"/api/message\", msgInfo);\n}\n","<template>\n\t<div class=\"message-container\" ref=\"messageContainer\">\n\t\t<MessageArea\n\t\t\ttitle=\"留言板\"\n\t\t\t:subTitle=\"`(${datas.total})`\"\n\t\t\t:isListLoading=\"loading\"\n\t\t\t:list=\"datas.rows\"\n\t\t\t@submit=\"handleSubmit\"\n\t\t/>\n\t</div>\n</template>\n\n<script>\nimport MessageArea from \"@/components/MessageArea\";\nimport fetchData from \"@/mixins/fetchData.js\";\nimport * as msgApi from \"@/api/message.js\";\nimport mainScroll from \"@/mixins/mainScroll.js\";\nexport default {\n\tcomponents: {\n\t\tMessageArea,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tpage: 1,\n\t\t\tlimit: 10,\n\t\t};\n\t},\n\tmixins: [fetchData({ total: 0, rows: [] }), mainScroll(\"messageContainer\")],\n\tcreated() {\n\t\tthis.$bus.$on(\"mainScroll\", this.handleScroll);\n\t},\n\tdestroyed() {\n\t\tthis.$bus.$off(\"mainScroll\", this.handleScroll);\n\t},\n\tcomputed: {\n\t\thasMore() {\n\t\t\treturn this.datas.rows.length < this.datas.total;\n\t\t},\n\t},\n\tmethods: {\n\t\tasync fetchDatas() {\n\t\t\treturn await msgApi.getMessages(this.page, this.limit);\n\t\t},\n\t\thandleScroll(dom) {\n\t\t\tif (this.loading || !dom) {\n\t\t\t\t// 目前正在加载更多\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst range = 100; // 顶一个可接受的范围，在这个范围内都算达到了底部\n\t\t\tconst dec = Math.abs(dom.scrollTop + dom.clientHeight - dom.scrollHeight);\n\t\t\tif (dec <= range) {\n\t\t\t\tthis.fetchMore();\n\t\t\t}\n\t\t},\n\t\t// 加载下一页\n\t\tasync fetchMore() {\n\t\t\tif (!this.hasMore) {\n\t\t\t\t// 没有更多啦\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.loading = true;\n\t\t\tthis.page++;\n\t\t\tconst resp = await this.fetchDatas();\n\t\t\tthis.datas.total = resp.total;\n\t\t\tthis.datas.rows = [...this.datas.rows,...resp.rows];\n\t\t\tthis.loading = false;\n\t\t},\n\t\tasync handleSubmit(data, callback) {\n\t\t\tconst resp = await msgApi.postMessage(data);\n\t\t\tcallback(\"感谢您的留言\");\n\t\t\tthis.data.rows.unshift(resp);\n\t\t},\n\t},\n};\n</script>\n\n<style scoped>\n.message-container {\n\twidth: 100%;\n\theight: 100%;\n\toverflow-y: auto;\n\tpadding: 25px 0;\n\tbox-sizing: border-box;\n\tscroll-behavior: smooth;\n}\n.message-area-container {\n\twidth: 700px;\n\tmargin: 0 auto;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=d3c33b04&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=d3c33b04&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d3c33b04\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataList.vue?vue&type=style&index=0&id=df40e7a2&scoped=true&lang=less&\"","export default function (defaultValue=null) {\n\treturn{\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tloading: true,\n\t\t\t\tdatas: defaultValue\n\t\t\t}\n\t\t},\n\t\tasync created(){\n\t\t\tthis.datas = await this.fetchDatas();\n\t\t\tthis.loading = false;\n\t\t}\n\t}\n}\n","export default function (refValue) {\n\treturn{\n\t\tmounted() {\n\t\t\tthis.$bus.$on('setMainScroll',this.handleSetMainScroll);\n\t\t\tthis.$refs[refValue].addEventListener(\"scroll\",this.handleMainScroll);\n\t\t},\n\t\tbeforeDestroy() {\n\t\t\tthis.$bus.$emit('mainScroll');\n\t\t\tthis.$bus.$off('setMainScroll',this.handleSetMainScroll);\n\t\t\tthis.$refs[refValue].removeEventListener(\"scroll\",this.handleMainScroll);\n\t\t},\n\t\tmethods: {\n\t\t\thandleMainScroll(){\n\t\t\t\tthis.$bus.$emit('mainScroll',this.$refs[refValue]);\n\t\t\t},\n\t\t\thandleSetMainScroll(scrollTop){\n\t\t\t\tthis.$refs[refValue].scrollTop = scrollTop;\n\t\t\t}\n\t\t}\n\t}\n}\n"],"sourceRoot":""}